<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Game ToÃ¡n 11 - AI Quiz</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #eef2ff;
  text-align: center;
}
.box {
  background: white;
  width: 90%;
  max-width: 620px;
  margin: 30px auto;
  padding: 20px;
  border-radius: 14px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}
button {
  display: block;
  width: 100%;
  margin: 8px 0;
  padding: 12px;
  font-size: 16px;
  border-radius: 10px;
  border: none;
  background: #4f46e5;
  color: white;
}
button:hover { background: #4338ca; }
#feedback { font-weight: bold; margin-top: 10px; }
.top {
  display: flex;
  justify-content: space-between;
  font-weight: bold;
}
.ai {
  background: #16a34a;
}
.ai:disabled {
  background: gray;
}
</style>
</head>

<body>
<div class="box">
  <div class="top">
    <span>â±ï¸ <span id="time">30</span>s</span>
    <span>Äiá»ƒm: <span id="score">0</span></span>
  </div>

  <h2>ğŸ® Game ToÃ¡n 11</h2>
  <p id="question"></p>
  <div id="answers"></div>

  <button id="aiBtn" class="ai" onclick="useAI()">ğŸ¤– AI gá»£i Ã½ (1 láº§n)</button>

  <p id="feedback"></p>
</div>

<script>
let score = 0;
let mainIndex = 0;
let subIndex = 0;
let inSub = false;
let wrongSub = 0;
let time = 30;
let timer;
let aiUsed = false;

const mainQuestions = [
{ q:"Sá»‘ nghiá»‡m dÆ°Æ¡ng cá»§a (1/3)^x = 9 lÃ :", a:["1","2","3","0"], correct:1 },
{ q:"Nghiá»‡m cá»§a 3^(x+1) = (1/9)^(2x) lÃ :", a:["x = -1/5","x = 1/5","x = 1","x = -1"], correct:0 },
{ q:"Tá»•ng nghiá»‡m cá»§a logâ‚ƒ(xÂ²+2)=3 lÃ :", a:["1","3","0","2"], correct:2 },
{ q:"Sá»‘ nghiá»‡m dÆ°Æ¡ng cá»§a ln(xÂ²âˆ’6x+7)=ln(xâˆ’3) lÃ :", a:["3","0","2","1"], correct:3 },
{ q:"Sá»‘ nghiá»‡m cá»§a logâ‚/â‚ƒ(xÂ²âˆ’3xâˆ’1)+logâ‚ƒ(2âˆ’x)=0 lÃ :", a:["2","1","3","0"], correct:0 }
];

const subQuestions = [
{ q:"Táº­p nghiá»‡m logâ‚‚(xÂ²âˆ’5x+7)<0 lÃ :", a:["(3;+âˆ)","(2;3)","(-âˆ;2)","(-âˆ;2)âˆª(3;+âˆ)"], correct:1 },
{ q:"Giáº£i logâ‚/â‚‚(2xâˆ’3)<logâ‚/â‚‚(5âˆ’2x). TÃ­nh a+b:", a:["11/2","7/2","13/2","9/2"], correct:3 },
{ q:"logâ‚„(xÂ²âˆ’4x)>logâ‚‚(8âˆ’x) cÃ³ bao nhiÃªu nghiá»‡m nguyÃªn?", a:["3","VÃ´ sá»‘","2","1"], correct:2 },
{ q:"GiÃ¡ trá»‹ a^(logâ‚aÂ²) lÃ :", a:["2áµƒ","aÂ²","2a","2"], correct:1 },
{ q:"GiÃ¡ trá»‹ logâ‚‡(7a) lÃ :", a:["logâ‚‡7+logâ‚‡a","1+logâ‚‡a","logâ‚‡a","7logâ‚‡a"], correct:1 }
];

function loadQuestion() {
 clearInterval(timer);
 time = 30;
 document.getElementById("time").innerText = time;
 timer = setInterval(countDown,1000);

 let q = inSub ? subQuestions[subIndex] : mainQuestions[mainIndex];
 document.getElementById("question").innerText = q.q;
 document.getElementById("answers").innerHTML = "";
 document.getElementById("feedback").innerText = "";

 q.a.forEach((ans,i)=>{
  let b=document.createElement("button");
  b.innerText=ans;
  b.onclick=()=>checkAnswer(i);
  document.getElementById("answers").appendChild(b);
 });
}

function countDown(){
 time--;
 document.getElementById("time").innerText=time;
 if(time<=0){
  clearInterval(timer);
  fail();
 }
}

function checkAnswer(c){
 clearInterval(timer);
 let q=inSub?subQuestions[subIndex]:mainQuestions[mainIndex];

 if(c===q.correct){
  score+=10;
  document.getElementById("feedback").innerText="âœ… ÄÃºng!";
  if(inSub){ inSub=false; mainIndex++; }
  else mainIndex++;
 } else {
  document.getElementById("feedback").innerText="âŒ Sai!";
  if(!inSub){ inSub=true; subIndex=mainIndex; }
  else wrongSub++;
 }

 document.getElementById("score").innerText=score;

 setTimeout(()=>{
  if(wrongSub>=2) lose();
  else if(mainIndex>=mainQuestions.length){
    score>=40 ? win() : lose();
  }
  else loadQuestion();
 },800);
}

function fail(){
 document.getElementById("feedback").innerText="â° Háº¿t giá»!";
 if(!inSub){ inSub=true; subIndex=mainIndex; }
 else wrongSub++;
 setTimeout(()=>{
  wrongSub>=2 ? lose() : loadQuestion();
 },800);
}

function useAI(){
 if(aiUsed) return;
 aiUsed=true;
 document.getElementById("aiBtn").disabled=true;

 let q=inSub?subQuestions[subIndex]:mainQuestions[mainIndex];
 document.getElementById("feedback").innerText=
 "ğŸ¤– Gá»£i Ã½: Loáº¡i cÃ¡c Ä‘Ã¡p Ã¡n khÃ´ng thá»a Ä‘iá»u kiá»‡n xÃ¡c Ä‘á»‹nh.";
}

function win(){
 document.querySelector(".box").innerHTML=`
 <h1>ğŸ‰ CHIáº¾N THáº®NG!</h1>
 <p>Báº¡n hoÃ n thÃ nh thá»­ thÃ¡ch ToÃ¡n 11</p>
 <p><b>Äiá»ƒm:</b> ${score}</p>
 `;
}

function lose(){
 document.querySelector(".box").innerHTML=`
 <h1>ğŸ’€ THUA Rá»’I!</h1>
 <p>Cáº§n Ã´n láº¡i Logarit nhÃ© ğŸ˜¢</p>
 <p><b>Äiá»ƒm:</b> ${score}</p>
 `;
}

loadQuestion();
</script>
</body>
</html>
